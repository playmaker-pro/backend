{% extends 'platform/base.html' %}
{% load i18n %}
{% load static %}


{% block extra_css %}
    {{ block.super }}
    <link href="{% static 'assets/css/filters.css' %}" rel="stylesheet">
{% endblock extra_css %}


{% block header %}
    {% if type == 'P' %}
        {% with menus_heading_title='Baza piłkarzy' %}
            {{ block.super }}
        {% endwith %}
        
    {% elif type == 'T' %}
         {% with menus_heading_title='Baza Trenerów' %}
            {{ block.super }}
        {% endwith %}
    {% elif type == 'C' %}
         {% with menus_heading_title='Baza Drużyn' %}
            {{ block.super }}
        {% endwith %}
    {% endif %}
{% endblock %}



{% block content_header %}
    {% include '_page_heading.html' with heading_title=page_title size=4 %}   
{% endblock %}

{% block content %}


{% if type == 'P' %}
{% include 'soccerbase/tables/filters_desktop_players.html' %}

{% elif type == 'T' %}
    {% include 'soccerbase/tables/filters_desktop_coaches.html' %}
{% elif type == 'C' %}
    {% include 'soccerbase/tables/filters_desktop_teams.html' %}
{% endif %}


<section id="tables" class="tables" style="padding-top:0px"> 
    <div class="container-fluid">
        {% csrf_token %}
        {% if page_obj.paginator.count == 0 %}
            {% include 'platform/partials/_empty.html' %}
        {% else %}

        {% if type == 'P' %}
            {% include 'soccerbase/tables/table_players_card.html' with objects=page_obj %}
            {% include 'platform/partials/_pagination.html' with object_type='piłkarzy' %}
        {% elif type == 'T' %}
            {% include 'soccerbase/tables/table_coaches_card.html' with objects=page_obj %}
            {% include 'platform/partials/_pagination.html' with object_type='trenerów' %}
        {% elif type == 'C' %}
            {% include 'soccerbase/tables/table_teams_card.html' with objects=page_obj %}
            {% include 'platform/partials/_pagination.html' with object_type='klubów' %}
        {% endif %}
        <span></span>   
        
        {% endif %}
    </div>
</section>
{% endblock content %}



{% block extra_js %}
    {{ block.super }}

    {% if type == 'P' %}
        {% include 'soccerbase/tables/filters_modal_players.html' %}
    {% elif type == 'T' %}
        {% include 'soccerbase/tables/filters_modal_coaches.html' %}
    {% elif type == 'C' %}
        {% include 'soccerbase/tables/filters_modal_teams.html' %}
    {% endif %}
    {% include 'platform/filters/filters_scripts.html' %}
    <script src="{% static 'assets/js/filters.js' %}"></script>
    
<script>

{% if user.is_authenticated %}
$(document).ready(function($){
    $("filter-form").submit(function() {
        $(this).find(":input").filter(function(){ return !this.value; }).attr("disabled", "disabled");
        return true; // ensure form still submits
    });
    
    // Un-disable form fields when page loads, in case they click back after submission
    $( "filter-form" ).find( ":input" ).prop( "disabled", false );
    
    $("filter-form-mobile").submit(function() {
        $(this).find(":input").filter(function(){ return !this.value; }).attr("disabled", "disabled");
        return true; // ensure form still submits
    });
    
    // Un-disable form fields when page loads, in case they click back after submission
    $( "filter-form-mobile" ).find( ":input" ).prop( "disabled", false );
    
});
    {% include 'platform/filters/filters_scripts.html' %}

{% endif %}


<script>
function checkWindowSize() {  
    if ( $(window).width() > 786 ) {  
        $('#table-filters').addClass('sticky-top'); 
        $('#table-filters').removeClass('fixed-bottom');   
    }
    else {
        $('#table-filters').addClass('fixed-bottom');
        $('#table-filters').removeClass('sticky-top');
    }
}

$(document).ready(function() {
    checkWindowSize();
});


$(window).resize(checkWindowSize);  

</script>
{% endblock %}