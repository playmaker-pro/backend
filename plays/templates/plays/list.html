{% extends 'platform/base.html' %}
{% load i18n %}
{% load static %}

{% block extra_css %}
    {{ block.super }}
    <link href="{% static 'assets/css/profiles.css' %}" rel="stylesheet">
    <link href="{% static 'assets/vendor/select2/select2.min.css' %}" rel="stylesheet" />
{% endblock extra_css%}


{% block content %}
<section id="plays" class="plays">
  <div class="container" data-aos="fade-up">
      <select id="leagues" class="selectpicker" data-live-search="true" >
        {% for league in objects %}
            <option data-tokens="{{league.name}} {{league.zpn}}"  value="{% url 'plays:summary' slug=league.slug  %}">{{ league.name }}</option>
        {% endfor %}
    </select>
    <div class="">    
        {% for league in objects %}
            {% if league.is_parent %}
                {{ league.name }}
                {% for child in league.league_set.all %}
                     <div><a href="{% url 'plays:summary' slug=child.slug  %}">{{ child.name }}</a>{{ child.serach_index }}</div><br>
                {% endfor %}
            {% else %}
                <div><a href="{% url 'plays:summary' slug=league.slug  %}">{{ league.name }}</a> {{ league.serach_index }}</div><br>
            {% endif %}
        {% endfor %}
    </div>
</div>
</section>
{% endblock %}


{% block extra_js %}
    {{ block.super }}
    <script src="{% static 'assets/js/filters.js' %}"></script>
    <script>
    $('#leagues').on('changed.bs.select', function (e, clickedIndex, isSelected, previousValue) {
        console.log(this.value, clickedIndex, isSelected, previousValue)
        window.location.href = this.value;
    });


    </script>
{% endblock %}